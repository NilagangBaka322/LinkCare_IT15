@model LinkCare_IT15.Models.AdminModel.AdminAppointmentsModel


@{
    ViewBag.Title = "Appointments · Link Care";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="container-fluid">
    <div class="mb-3">
        <h3 class="fw-bold">Appointments</h3>
        <p class="text-muted">Manage and track all patient appointments</p>
    </div>

    <div class="lc-card p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">
                <i class="bi bi-calendar2-check me-2"></i> Appointments
            </h5>
            <a asp-action="NewAppointment" class="btn btn-primary btn-sm">+ New Appointment</a>
        </div>

        <p class="text-muted">View today’s schedule and upcoming appointments</p>

        <div class="row">
            <!-- Today's Appointments -->
            <div class="col-md-6 border-end">
                <h6 class="fw-bold mb-2">Today's Schedule</h6>
                <p class="small text-muted">@Model.TodayAppointments.Count appointments</p>

                <div class="list-group">
                    @foreach (var appt in Model.TodayAppointments.OrderBy(a => a.Start))
                    {
                        var badgeClass = appt.Status.ToLower() switch
                        {
                            "completed" => "bg-success-subtle text-success",
                            "cancelled" => "bg-danger-subtle text-danger",
                            _ => "bg-primary-subtle text-primary"
                        };

                        <div class="list-group-item d-flex justify-content-between align-items-start mb-2 rounded shadow-sm">
                            <div>
                                <div class="fw-semibold text-primary">
                                    <i class="bi bi-clock me-1"></i>
                                    @appt.Start.ToString("hh:mm tt")
                                </div>
                                <div>@appt.PatientName</div>
                                <small class="text-muted">@appt.Title</small>
                            </div>
                            <span class="badge rounded-pill @badgeClass align-self-center">
                                @appt.Status.ToLower()
                            </span>
                        </div>
                    }
                </div>
            </div>

            <!-- Upcoming Appointments -->
            <div class="col-md-6">
                <h6 class="fw-bold mb-2">Upcoming Appointments</h6>
                <p class="small text-muted">@Model.UpcomingAppointments.Count upcoming</p>

                <div class="list-group">
                    @foreach (var appt in Model.UpcomingAppointments.OrderBy(a => a.Start))
                    {
                        var badgeClass = appt.Status.ToLower() switch
                        {
                            "completed" => "bg-success-subtle text-success",
                            "cancelled" => "bg-danger-subtle text-danger",
                            _ => "bg-primary-subtle text-primary"
                        };

                        <div class="list-group-item d-flex justify-content-between align-items-start mb-2 rounded shadow-sm">
                            <div>
                                <div class="fw-semibold text-primary">
                                    <i class="bi bi-calendar-event me-1"></i>
                                    @appt.Start.ToString("MMM dd, yyyy · hh:mm tt")
                                </div>
                                <div>@appt.PatientName</div>
                                <small class="text-muted">@appt.Title</small>
                            </div>
                            <span class="badge rounded-pill @badgeClass align-self-center">
                                @appt.Status.ToLower()
                            </span>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
